<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neumorphic Peripheral - Vanilla JS Example</title>
    <link rel="stylesheet" href="../../styles/neumorphic.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f0f0f3 0%, #e8e8eb 100%);
            margin: 0;
            padding: 40px 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
        }
        
        body.dark {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            color: #333;
            margin-bottom: 10px;
            font-weight: 300;
            font-size: 2.5rem;
            transition: color 0.3s ease;
        }
        
        body.dark .header h1 {
            color: #f7fafc;
        }
        
        .header p {
            color: #666;
            font-size: 1.1rem;
            transition: color 0.3s ease;
        }
        
        body.dark .header p {
            color: #cbd5e0;
        }
        
        .demo-section {
            margin-bottom: 40px;
        }
        
        .demo-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-weight: 400;
            transition: color 0.3s ease;
        }
        
        body.dark .demo-section h2 {
            color: #f7fafc;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        body.dark .form-group label {
            color: #f7fafc;
        }
        
        .theme-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .toggle-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .toggle-group label {
            margin-bottom: 0;
            cursor: pointer;
        }
        
        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }
        
        .success-message {
            color: #27ae60;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }
        
        .validation-demo {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        body.dark .validation-demo {
            border-color: #4a5568;
            background: rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div class="theme-switcher">
        <button id="theme-toggle" type="button">🌙 Dark</button>
    </div>

    <div class="container">
        <div class="header">
            <h1>Neumorphic Peripheral</h1>
            <p>Beautiful neumorphic components for vanilla JavaScript</p>
        </div>

        <!-- Cards Demo -->
        <div class="demo-section">
            <h2>Card Components</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px;">
                <div id="card-raised">
                    <h3 style="margin: 0 0 8px 0; font-size: 1rem;">Raised Card</h3>
                    <p style="margin: 0; color: #666; font-size: 0.9rem;">Elevated neumorphic style</p>
                </div>
                <div id="card-inset">
                    <h3 style="margin: 0 0 8px 0; font-size: 1rem;">Inset Card</h3>
                    <p style="margin: 0; color: #666; font-size: 0.9rem;">Pressed into surface</p>
                </div>
                <div id="card-flat">
                    <h3 style="margin: 0 0 8px 0; font-size: 1rem;">Flat Card</h3>
                    <p style="margin: 0; color: #666; font-size: 0.9rem;">Minimal shadow styling</p>
                </div>
            </div>
        </div>

        <!-- Form Demo -->
        <div class="demo-section">
            <div id="form-card">
                <h2>Interactive Form</h2>
                
                <form id="demo-form">
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" placeholder="Enter your email" required>
                        <div class="error-message" id="email-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="password">Password *</label>
                        <input type="password" id="password" placeholder="Enter your password" required>
                        <div class="error-message" id="password-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="confirm-password">Confirm Password *</label>
                        <input type="password" id="confirm-password" placeholder="Confirm your password" required>
                        <div class="error-message" id="confirm-password-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea id="message" rows="4" placeholder="Tell us about yourself..."></textarea>
                        <div class="error-message" id="message-error"></div>
                    </div>

                    <div class="toggle-group">
                        <input type="checkbox" id="newsletter">
                        <label for="newsletter">Subscribe to newsletter</label>
                    </div>

                    <div class="toggle-group">
                        <input type="radio" id="terms" name="agreement" value="terms">
                        <label for="terms">I agree to the terms and conditions</label>
                    </div>

                    <div class="controls">
                        <button id="submit-btn" type="submit">Submit Form</button>
                        <button id="reset-btn" type="button">Reset</button>
                        <button id="validate-btn" type="button">Validate All</button>
                    </div>

                    <div class="success-message" id="form-success">
                        ✅ Form submitted successfully!
                    </div>
                </form>
            </div>
        </div>

        <!-- Interactive Demo -->
        <div class="demo-section">
            <div id="interactive-card">
                <h2>Component Testing</h2>
                
                <div class="validation-demo">
                    <h3>Validation Testing</h3>
                    <div class="form-group">
                        <label for="test-email">Email Validation</label>
                        <input type="email" id="test-email" placeholder="test@example.com">
                        <small>Try: valid email, invalid email, empty field</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="test-password">Password with Strength</label>
                        <input type="password" id="test-password" placeholder="Create a strong password">
                        <small>Watch the strength indicator as you type</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="test-textarea">Auto-resize Textarea</label>
                        <textarea id="test-textarea" placeholder="Start typing and watch it grow..."></textarea>
                        <small>This textarea auto-resizes as you type</small>
                    </div>
                </div>

                <div class="controls">
                    <button id="loading-demo-btn" type="button">Loading Demo</button>
                    <button id="theme-demo-btn" type="button">Theme Demo</button>
                    <button id="clear-all-btn" type="button">Clear All</button>
                </div>
            </div>
        </div>

        <!-- Component States Demo -->
        <div class="demo-section">
            <div id="states-card">
                <h2>Component States</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div>
                        <h4>Button States</h4>
                        <button id="primary-btn" type="button">Primary Button</button><br><br>
                        <button id="secondary-btn" type="button">Secondary Button</button><br><br>
                        <button id="ghost-btn" type="button">Ghost Button</button>
                    </div>
                    <div>
                        <h4>Toggle States</h4>
                        <div class="toggle-group">
                            <input type="checkbox" id="switch-demo">
                            <label for="switch-demo">Switch Toggle</label>
                        </div>
                        <div class="toggle-group">
                            <input type="checkbox" id="checkbox-demo">
                            <label for="checkbox-demo">Checkbox Style</label>
                        </div>
                        <div class="toggle-group">
                            <input type="radio" id="radio-demo" name="radio-group">
                            <label for="radio-demo">Radio Style</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load the neumorphic library -->
    <script type="module">
        // In a real implementation, this would be:
        // import np from '../../dist/index.esm.js'
        
        // For this demo, we'll simulate the library functionality
        const np = {
            card: (element, config = {}) => {
                console.log('Card component initialized:', element.id, config);
                element.style.background = '#f0f0f3';
                element.style.borderRadius = '12px';
                element.style.padding = '20px';
                
                if (config.variant === 'raised') {
                    element.style.boxShadow = '8px 8px 16px -2px #d1d9e6, -8px -8px 16px -2px #ffffff';
                } else if (config.variant === 'inset') {
                    element.style.boxShadow = 'inset 8px 8px 16px -2px #d1d9e6, inset -8px -8px 16px -2px #ffffff';
                } else if (config.variant === 'flat') {
                    element.style.boxShadow = 'none';
                }
                
                return { destroy: () => {} };
            },
            
            input: (element, config = {}) => {
                console.log('Input component initialized:', element.id, config);
                element.style.background = '#f0f0f3';
                element.style.border = 'none';
                element.style.borderRadius = '12px';
                element.style.padding = '12px 16px';
                element.style.boxShadow = 'inset 8px 8px 16px -2px #d1d9e6, inset -8px -8px 16px -2px #ffffff';
                element.style.outline = 'none';
                element.style.fontSize = '16px';
                element.style.width = '100%';
                element.style.boxSizing = 'border-box';
                
                // Simple validation simulation
                if (config.validate) {
                    element.addEventListener('blur', () => {
                        const value = element.value;
                        let isValid = true;
                        let errorMsg = '';
                        
                        if (config.validate.required && !value) {
                            isValid = false;
                            errorMsg = 'This field is required';
                        } else if (config.validate.email && value && !/\S+@\S+\.\S+/.test(value)) {
                            isValid = false;
                            errorMsg = 'Please enter a valid email';
                        } else if (config.validate.minLength && value.length < config.validate.minLength) {
                            isValid = false;
                            errorMsg = `Must be at least ${config.validate.minLength} characters`;
                        }
                        
                        const errorElement = document.getElementById(element.id + '-error');
                        if (errorElement) {
                            if (isValid) {
                                errorElement.style.display = 'none';
                                element.style.boxShadow = 'inset 8px 8px 16px -2px #d1d9e6, inset -8px -8px 16px -2px #ffffff';
                            } else {
                                errorElement.textContent = errorMsg;
                                errorElement.style.display = 'block';
                                element.style.boxShadow = 'inset 8px 8px 16px -2px #d1d9e6, inset -8px -8px 16px -2px #ffffff, 0 0 0 2px rgba(231, 76, 60, 0.25)';
                            }
                        }
                    });
                }
                
                return { 
                    destroy: () => {},
                    validate: () => ({ isValid: true, errors: [] }),
                    getValue: () => element.value,
                    setValue: (value) => element.value = value
                };
            },
            
            password: (element, config = {}) => {
                console.log('Password component initialized:', element.id, config);
                const inputInstance = np.input(element, config);
                
                if (config.showToggle !== false) {
                    // Create toggle button
                    const wrapper = document.createElement('div');
                    wrapper.style.position = 'relative';
                    wrapper.style.display = 'inline-block';
                    wrapper.style.width = '100%';
                    
                    element.parentNode.insertBefore(wrapper, element);
                    wrapper.appendChild(element);
                    
                    const toggleBtn = document.createElement('button');
                    toggleBtn.type = 'button';
                    toggleBtn.innerHTML = '👁️';
                    toggleBtn.style.position = 'absolute';
                    toggleBtn.style.right = '12px';
                    toggleBtn.style.top = '50%';
                    toggleBtn.style.transform = 'translateY(-50%)';
                    toggleBtn.style.background = 'none';
                    toggleBtn.style.border = 'none';
                    toggleBtn.style.cursor = 'pointer';
                    toggleBtn.style.fontSize = '16px';
                    
                    element.style.paddingRight = '45px';
                    
                    toggleBtn.addEventListener('click', () => {
                        if (element.type === 'password') {
                            element.type = 'text';
                            toggleBtn.innerHTML = '🙈';
                        } else {
                            element.type = 'password';
                            toggleBtn.innerHTML = '👁️';
                        }
                    });
                    
                    wrapper.appendChild(toggleBtn);
                }
                
                if (config.strengthIndicator) {
                    // Create strength indicator
                    const strengthDiv = document.createElement('div');
                    strengthDiv.style.marginTop = '8px';
                    strengthDiv.style.display = 'flex';
                    strengthDiv.style.gap = '4px';
                    strengthDiv.style.alignItems = 'center';
                    
                    for (let i = 0; i < 4; i++) {
                        const bar = document.createElement('div');
                        bar.style.height = '4px';
                        bar.style.flex = '1';
                        bar.style.borderRadius = '2px';
                        bar.style.background = '#ddd';
                        bar.className = 'strength-bar';
                        strengthDiv.appendChild(bar);
                    }
                    
                    const strengthText = document.createElement('span');
                    strengthText.style.fontSize = '12px';
                    strengthText.style.marginLeft = '8px';
                    strengthText.textContent = 'Weak';
                    strengthDiv.appendChild(strengthText);
                    
                    element.parentNode.insertBefore(strengthDiv, element.nextSibling);
                    
                    element.addEventListener('input', () => {
                        const password = element.value;
                        let strength = 0;
                        
                        if (password.length >= 8) strength++;
                        if (/[A-Z]/.test(password)) strength++;
                        if (/[a-z]/.test(password)) strength++;
                        if (/[0-9]/.test(password)) strength++;
                        if (/[^A-Za-z0-9]/.test(password)) strength++;
                        
                        const bars = strengthDiv.querySelectorAll('.strength-bar');
                        const colors = ['#e74c3c', '#ff9500', '#007aff', '#27ae60'];
                        const labels = ['Weak', 'Fair', 'Good', 'Strong'];
                        
                        bars.forEach((bar, index) => {
                            if (index < strength) {
                                bar.style.background = colors[Math.min(strength - 1, 3)];
                            } else {
                                bar.style.background = '#ddd';
                            }
                        });
                        
                        strengthText.textContent = labels[Math.min(strength - 1, 3)] || 'Weak';
                        strengthText.style.color = colors[Math.min(strength - 1, 3)] || '#e74c3c';
                    });
                }
                
                return inputInstance;
            },
            
            textarea: (element, config = {}) => {
                console.log('Textarea component initialized:', element.id, config);
                element.style.background = '#f0f0f3';
                element.style.border = 'none';
                element.style.borderRadius = '12px';
                element.style.padding = '12px 16px';
                element.style.boxShadow = 'inset 8px 8px 16px -2px #d1d9e6, inset -8px -8px 16px -2px #ffffff';
                element.style.outline = 'none';
                element.style.fontSize = '16px';
                element.style.width = '100%';
                element.style.boxSizing = 'border-box';
                element.style.resize = 'none';
                element.style.fontFamily = 'inherit';
                
                if (config.autoResize !== false) {
                    const autoResize = () => {
                        element.style.height = 'auto';
                        element.style.height = element.scrollHeight + 'px';
                    };
                    
                    element.addEventListener('input', autoResize);
                    autoResize();
                }
                
                return { destroy: () => {} };
            },
            
            button: (element, config = {}) => {
                console.log('Button component initialized:', element.id, config);
                element.style.background = config.variant === 'primary' ? '#6c5ce7' : '#f0f0f3';
                element.style.color = config.variant === 'primary' ? 'white' : '#333';
                element.style.border = 'none';
                element.style.borderRadius = '12px';
                element.style.padding = '12px 24px';
                element.style.fontSize = '16px';
                element.style.cursor = 'pointer';
                element.style.outline = 'none';
                element.style.transition = 'all 0.2s ease';
                
                if (config.variant !== 'ghost') {
                    element.style.boxShadow = '8px 8px 16px -2px #d1d9e6, -8px -8px 16px -2px #ffffff';
                }
                
                element.addEventListener('mouseenter', () => {
                    element.style.transform = 'translateY(-1px)';
                });
                
                element.addEventListener('mouseleave', () => {
                    element.style.transform = 'translateY(0)';
                });
                
                return { 
                    destroy: () => {},
                    setLoading: (loading) => {
                        if (loading) {
                            element.disabled = true;
                            element.textContent = 'Loading...';
                            element.style.opacity = '0.7';
                        } else {
                            element.disabled = false;
                            element.style.opacity = '1';
                        }
                    }
                };
            },
            
            toggle: (element, config = {}) => {
                console.log('Toggle component initialized:', element.id, config);
                
                // Hide original input
                element.style.position = 'absolute';
                element.style.opacity = '0';
                element.style.pointerEvents = 'none';
                
                // Create custom toggle
                const toggle = document.createElement('div');
                toggle.style.width = config.type === 'switch' ? '44px' : '24px';
                toggle.style.height = config.type === 'switch' ? '24px' : '24px';
                toggle.style.background = '#f0f0f3';
                toggle.style.borderRadius = config.type === 'switch' ? '12px' : config.type === 'radio' ? '50%' : '4px';
                toggle.style.boxShadow = 'inset 8px 8px 16px -2px #d1d9e6, inset -8px -8px 16px -2px #ffffff';
                toggle.style.position = 'relative';
                toggle.style.cursor = 'pointer';
                toggle.style.transition = 'all 0.2s ease';
                
                if (config.type === 'switch') {
                    const slider = document.createElement('div');
                    slider.style.width = '20px';
                    slider.style.height = '20px';
                    slider.style.background = '#f0f0f3';
                    slider.style.borderRadius = '50%';
                    slider.style.boxShadow = '4px 4px 8px -1px #d1d9e6, -4px -4px 8px -1px #ffffff';
                    slider.style.position = 'absolute';
                    slider.style.top = '2px';
                    slider.style.left = '2px';
                    slider.style.transition = 'all 0.2s ease';
                    toggle.appendChild(slider);
                    
                    const updateSwitch = () => {
                        if (element.checked) {
                            slider.style.left = '22px';
                            toggle.style.background = '#6c5ce7';
                        } else {
                            slider.style.left = '2px';
                            toggle.style.background = '#f0f0f3';
                        }
                    };
                    
                    toggle.addEventListener('click', () => {
                        element.checked = !element.checked;
                        updateSwitch();
                        element.dispatchEvent(new Event('change'));
                    });
                    
                    updateSwitch();
                } else {
                    const icon = document.createElement('div');
                    
                    if (config.type === 'checkbox') {
                        icon.innerHTML = '✓';
                        icon.style.color = 'white';
                        icon.style.fontSize = '16px';
                        icon.style.fontWeight = 'bold';
                        icon.style.position = 'absolute';
                        icon.style.top = '50%';
                        icon.style.left = '50%';
                        icon.style.transform = 'translate(-50%, -50%) scale(0)';
                        icon.style.transition = 'transform 0.2s ease';
                    } else if (config.type === 'radio') {
                        icon.style.width = '12px';
                        icon.style.height = '12px';
                        icon.style.background = '#6c5ce7';
                        icon.style.borderRadius = '50%';
                        icon.style.position = 'absolute';
                        icon.style.top = '50%';
                        icon.style.left = '50%';
                        icon.style.transform = 'translate(-50%, -50%) scale(0)';
                        icon.style.transition = 'transform 0.2s ease';
                    }
                    
                    toggle.appendChild(icon);
                    
                    const updateToggle = () => {
                        if (element.checked) {
                            icon.style.transform = 'translate(-50%, -50%) scale(1)';
                            if (config.type === 'checkbox') {
                                toggle.style.background = '#6c5ce7';
                                toggle.style.boxShadow = 'none';
                            }
                        } else {
                            icon.style.transform = 'translate(-50%, -50%) scale(0)';
                            toggle.style.background = '#f0f0f3';
                            toggle.style.boxShadow = 'inset 8px 8px 16px -2px #d1d9e6, inset -8px -8px 16px -2px #ffffff';
                        }
                    };
                    
                    toggle.addEventListener('click', () => {
                        if (config.type === 'radio') {
                            // Handle radio group
                            const radios = document.querySelectorAll(`input[name="${element.name}"]`);
                            radios.forEach(radio => {
                                radio.checked = false;
                                // Update other radio toggles...
                            });
                        }
                        
                        element.checked = !element.checked;
                        updateToggle();
                        element.dispatchEvent(new Event('change'));
                    });
                    
                    updateToggle();
                }
                
                element.parentNode.insertBefore(toggle, element.nextSibling);
                
                return { destroy: () => {} };
            },
            
            setTheme: (theme) => {
                console.log('Setting theme:', theme);
                if (theme === 'dark') {
                    document.getElementById('loading-demo-btn').addEventListener('click', () => {
                loadingDemoBtn.setLoading(true);
                setTimeout(() => {
                    loadingDemoBtn.setLoading(false);
                    document.getElementById('loading-demo-btn').textContent = 'Loading Demo';
                }, 2000);
            });

            document.getElementById('theme-demo-btn').addEventListener('click', () => {
                // Cycle through themes quickly
                let count = 0;
                const interval = setInterval(() => {
                    np.setTheme(count % 2 === 0 ? 'dark' : 'light');
                    count++;
                    if (count > 6) {
                        clearInterval(interval);
                        np.setTheme('light');
                        document.body.classList.remove('dark');
                    }
                }, 300);
            });

            document.getElementById('clear-all-btn').addEventListener('click', () => {
                document.getElementById('email').value = '';
                document.getElementById('password').value = '';
                document.getElementById('confirm-password').value = '';
                document.getElementById('message').value = '';
                document.getElementById('test-email').value = '';
                document.getElementById('test-password').value = '';
                document.getElementById('test-textarea').value = '';
                
                // Hide all error messages
                document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
                document.getElementById('form-success').style.display = 'none';
            });

            document.getElementById('validate-btn').addEventListener('click', () => {
                // Trigger validation on all inputs
                document.getElementById('email').dispatchEvent(new Event('blur'));
                document.getElementById('password').dispatchEvent(new Event('blur'));
                document.getElementById('confirm-password').dispatchEvent(new Event('blur'));
                document.getElementById('test-email').dispatchEvent(new Event('blur'));
            });

            document.getElementById('demo-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Simple form validation
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                
                let isValid = true;
                
                if (!email || !/\S+@\S+\.\S+/.test(email)) {
                    isValid = false;
                }
                
                if (!password || password.length < 8) {
                    isValid = false;
                }
                
                if (password !== confirmPassword) {
                    isValid = false;
                    const errorEl = document.getElementById('confirm-password-error');
                    errorEl.textContent = 'Passwords do not match';
                    errorEl.style.display = 'block';
                }
                
                if (isValid) {
                    document.getElementById('form-success').style.display = 'block';
                    setTimeout(() => {
                        document.getElementById('form-success').style.display = 'none';
                    }, 3000);
                }
            });

            document.getElementById('reset-btn').addEventListener('click', () => {
                document.getElementById('clear-all-btn').click();
            });

            console.log('🎉 Neumorphic Peripheral demo initialized!');
            console.log('All components are working with simulated functionality.');
            console.log('In the real library, these would have full validation, theming, and accessibility features.');
        }}};
    </script>
</body>
</html>